function loadAssessment(){0==currASlide?startAssessment():5==currASlide&&endAssessment(),$("#myModalAssInst").modal("hide")}function startAssessment(){assessmentArray.shuffle(),$("#prev-btn, #next-btn").css("display","none"),userAnswers[currModule]=[],isAssessment=!0,showQuizQtn()}function endAssessment(){currASlide=0,isAssessment=!1,currModule==completedModule&&noOfSlides.length-1!=completedModule?(currModule++,completedModule++,enableCompletedModules()):closeWindow(),changeModule(currModule,1)}function showQuizQtn(){if(5==currASlide){for(var e=0,s=0,r=0,t=1;5>=t;t++)1==userAnswers[currModule][t-1]?e++:0==userAnswers[currModule][t-1]?r++:s++;return $("#myModalAssInst .modal-header h4").html("SCORE BOARD"),$("#myModalAssInst .modal-body p").html("Total No. of Questions :-&emsp;05</br>No. of Correct Answers :-&emsp;0"+e+"</br>No. of Wrong Answers :-&emsp;0"+r),currModule==noOfSlides.length-1?(courseComplete(),$("#myModalAssInst .modal-body p").html("Total No. of Questions :-&emsp;05</br>No. of Correct Answers :-&emsp;0"+e+"</br>No. of Wrong Answers :-&emsp;0"+r+"</br></br>Please click 'Exit' button to complete the course"),$("#myModalAssInst .cancelbtn").text("Retake"),$("#myModalAssInst .okbtn").text("Exit")):($(".cancelbtn").prop("disabled",!0),$(".cancelbtn").css("opacity","0.01")),void $("#myModalAssInst").modal("show")}convertArrToString(),$(".xmlcontent").load("Modules/Module_"+currModule+"/QP_M"+currModule+"_P"+assessmentArray[currASlide]+".html",function(e,s){"success"==s&&($(".xmlcontent").fadeIn(600),buttonHandler(),applyCSS())}),$(".page-number").html("<h4>Page "+addZero(Number(currASlide)+1)+" of 05</h4>"),currASlide++}function buttonHandler(){$("#quizbtn").addClass("disabled"),$("input[type='radio']").change(function(){$("#quizbtn").removeClass("disabled")})}function submitRBHandler(){$("#quizbtn").addClass("disabled");var e=0,s=0;userAnswers[currModule][currASlide-1]=0,$.each($("input[type='radio']:checked"),function(){e=$("input[type='radio']:checked").val(),s=Number($("input[type='radio']:checked").attr("ans"))}),e&&s&&(userAnswers[currModule][currASlide-1]=1),convertArrToString(),showQuizQtn()}function submitCBHandler(){$("#quizbtn").addClass("disabled");var e=0;userAnswers[currModule][currASlide-1]=0,$.each($("input[type='checkbox']"),function(){0!=Number($(this).attr("ans"))&&e++});var s=[],r=[];$.each($("input[type='checkbox']:checked"),function(){s.push($(this).val()),r.push($(this).attr("ans"))}),r.join(", "),s.join(", "),0!=e&&r.equals(s)&&s.length==Number(e)&&(userAnswers[currModule][currASlide-1]=1),convertArrToString(),showQuizQtn()}function convertArrToString(){var e="";totalScore=0;for(var s=1;s<=noOfSlides.length-1;s++)if(userAnswers[s]){for(var r=1;5>=r;r++)1==userAnswers[s][r-1]?(e+="1",totalScore+=quizWeight):e+=0==userAnswers[s][r-1]?"0":":";e+="|"}set("cmi.score.scaled",totalScore),set("cmi.score.raw",totalScore),set("cmi.scaled_passing_score:",totalScore),set("cmi.score.min",60),set("cmi.score.max",100),set("cmi.suspend_data",e)}function convertStrToArray(e){for(var s=1;s<=e.split("|").length-1;s++)userAnswers[s]=[],userAnswers[s]=e.split("|")[s-1].split("")}$(document).ready(function(){$("#myModalAssInst .okbtn").click(function(){loadAssessment()}),$("#myModalAssInst .cancelbtn").click(function(){$("#myModalAssInst").modal("hide"),currModule==noOfSlides.length-1&&changeModule(1,1)})});
